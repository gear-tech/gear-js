.button {
  --icon-size: 24px;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;

  padding: 0;

  font-family: inherit;
  font-weight: 600;
  line-height: 24px;

  border: none;
  border-radius: 4px;
  transition-property: color, background-color, box-shadow;
  transition-duration: 250ms;

  cursor: pointer;
  outline: none;
  outline-offset: 2px;

  &:disabled {
    cursor: not-allowed;
  }

  &:focus-visible {
    outline: hsl(var(--primary)) 2px solid;
  }

  svg {
    color: currentColor;
    stroke: currentColor;
    width: var(--icon-size);
    height: var(--icon-size);
  }
}

// Utils
.block {
  width: 100%;
}

.noWrap {
  white-space: nowrap;
}

// Color variants
.primary {
  color: hsl(240, 3%, 12%);
  background-color: hsla(var(--primary));

  &:enabled {
    &:not(:focus-visible,:active) {
      box-shadow: 0 1.6px 3.2px 0 hsla(var(--primary), 0.4);
    }

    &:hover {
      background-color: hsl(166, 100%, 59%);
      box-shadow: 0 1.6px 3.2px 0 hsla(var(--primary), 0.4), 0 0.4px 1.2px 0 hsla(0, 0%, 0%, 0.2) inset;
    }

    &:focus-visible {
      background-color: hsl(165, 88%, 44%);
      box-shadow: 0 0.4px 1.2px 0 hsla(0, 0%, 0%, 0.2) inset;
    }

    &:active {
      background-color: hsl(165, 90%, 39%);
      box-shadow: 0 0.4px 1.2px 0 hsla(0, 0%, 0%, 0.2) inset;
    }
  }

  &.loading {
    @extend .loader-dark;

    &::before {
      background-color: hsl(165, 90%, 39%);
      box-shadow: 0 1.6px 3.2px 0 hsla(var(--primary), 0.4);
    }
  }
}

.dark {
  color: hsla(0, 0%, 100%, 1);
  background-color: hsla(0, 0%, 0%, 1);

  &:enabled {
    &:hover {
      background-color: hsla(0, 0%, 25%, 1);
    }

    &:focus-visible {
      background-color: hsla(0, 0%, 15%, 1);
    }

    &:active {
      background-color: hsla(0, 0%, 9%, 1);
    }
  }

  &.loading {
    @extend .loader-white;

    &::before {
      background-color: hsla(0, 0%, 9%, 1);
    }
  }
}

.light {
  color: hsla(0, 0%, 0%, 1);
  background-color: hsla(0, 0%, 100%, 1);

  &:enabled {
    &:hover {
      background-color: hsla(205, 2%, 82%, 1);
    }

    &:focus-visible {
      background-color: hsla(210, 3%, 78%, 1);
    }

    &:active {
      background-color: hsla(200, 3%, 74%, 1);
    }
  }

  &.loading {
    &::before {
      background-color: hsla(200, 3%, 74%, 1);
    }
  }
}

.grey {
  color: hsla(0, 0%, 0%, 1);
  background-color: hsla(240, 4%, 90%, 1);

  &:enabled {
    &:hover {
      background-color: hsla(240, 6%, 88%, 1);
    }

    &:focus-visible {
      background-color: hsla(240, 5%, 82%, 1);
    }

    &:active {
      background-color: hsla(240, 4%, 75%, 1);
    }
  }

  &.loading {
    &::before {
      background-color: hsla(240, 4%, 75%, 1);
    }
  }
}

.border {
  color: hsla(0, 0%, 0%, 1);
  background-color: hsla(0, 0%, 100%, 1);
  box-shadow: 0 0 0 2px currentColor inset;

  &:enabled {
    &:hover, &:focus-visible, &:active {
      color: hsla(0, 0%, 100%, 1);
    }

    &:hover {
      background-color: hsl(194, 10%, 18%);
      box-shadow: unset;
    }

    &:focus-visible {
      background-color: hsl(240, 3%, 12%);
      box-shadow: unset;
    }

    &:active {
      background-color: hsl(0, 0%, 0%);
      box-shadow: unset;
    }
  }

  &:disabled {
    box-shadow: 0 0 0 2px transparent inset;
  }

  &.loading {
    &::before {
      background-color: hsl(0, 0%, 0%);
      box-shadow: unset;
    }

    @extend .loader-white;
  }
}

.transparent {
  color: hsla(0, 0%, 0%, 1);
  background-color: transparent;

  &:enabled {
    &:hover {
      background-color: hsla(210, 20%, 96%, 0.8);
    }

    &:focus-visible {
      background-color: hsla(0, 0%, 0%, 1);
      color: hsla(0, 0%, 100%, 1);
    }

    &:active {
      background-color: hsla(240, 2%, 15%, 1);
      color: hsla(0, 0%, 100%, 1);
    }
  }

  &.loading {
    &::before {
      background-color: hsla(240, 2%, 15%, 1);
    }

    @extend .loader-white;
  }
}

.destructive {
  color: hsla(0, 0%, 255%, 1);
  background-color: hsla(0, 79%, 63%, 1);

  &:enabled {
    &:hover {
      background-color: hsla(0, 85%, 61%, 1);
    }

    &:focus-visible {
      background-color: hsla(0, 81%, 58%, 1);
    }

    &:active {
      background-color: hsla(0, 71%, 53%, 1);
    }
  }

  &.loading {
    &::before {
      background-color: hsla(0, 71%, 53%, 1);
    }

    @extend .loader-white;
  }
}

// Global states
.disabled {
  background-color: hsla(194, 11%, 39%, 0.04);
  color: hsla(194, 11%, 39%, 0.5);
}

@keyframes spinner {
  to { transform: rotate(360deg); }
}

.loading {
  --spinner-size: 24px;

  position: relative;
  overflow: hidden;
  color: transparent!important;

  &::before {
    content: '';
    position: absolute;
    z-index: 1;
    inset: 0;
    background: hsl(var(--bg-color));
  }

  @extend .loader-dark;

  &::after {
    content: '';
    position: absolute;
    z-index: 1;
    width: var(--spinner-size);
    height: var(--spinner-size);
    animation: spinner 1s steps(8, end) infinite;
    background-repeat: no-repeat;
    background-size: contain;
  }
}

// Sizes
.x-large {
  padding: 14px 28px;
  font-size: 18px;

  &.noText {
    padding: 10px;
    min-height: 52px;
  }
}

.default,
.large {
  padding: 12px 24px;
  font-size: 16px;

  &.noText {
    padding: 8px;
    min-height: 48px;
  }
}

.medium {
  --icon-size: 20px;

  padding: 10px 24px;
  font-size: 16px;

  &.noText {
    padding: 6px;
    min-height: 44px;
  }
}

.small {
  --icon-size: 20px;

  padding: 8px 24px;
  font-size: 16px;

  &.noText {
    padding: 4px;
    min-height: 40px;
  }

  &.loading {
    --spinner-size: 20px;
  }
}

.x-small {
  --icon-size: 16px;

  padding: 4px 16px;
  font-size: 16px;

  &.noText {
    padding: 4px;
    min-height: 32px;

    svg:only-child {
      --icon-size: 24px;
    }
  }

  &.loading {
    --spinner-size: 20px;
  }
}

.noText {
  aspect-ratio: 1/1;

  svg:only-child {
    --icon-size: 32px;
  }
}

// Theming
:global(.dark-theme) {
  .border {
    color: hsla(0, 0%, 100%, 1);
    background-color: hsla(240, 3%, 12%, 1);
    box-shadow: 0 0 0 2px hsla(0, 0%, 96%, 1) inset;

    &:enabled {
      &:hover {
        background-color: hsla(194, 11%, 39%, 0.3);
      }
      &:focus-visible {
        background-color: hsla(194, 11%, 39%, 0.6);
      }
      &:active {
        background-color: hsla(194, 11%, 39%, 0.8);
      }
    }

    &.loading {
      &::before {
        background-color: hsla(194, 11%, 39%, 0.8);
      }
    }
  }

  .grey {
    color: hsla(0, 0%, 100%, 1);
    background-color: hsla(194, 11%, 39%, 0.1);

    &:enabled {
      &:hover {
        background-color: hsla(194, 11%, 39%, 0.3);
      }
      &:focus-visible {
        background-color: hsla(194, 11%, 39%, 0.6);
      }
      &:active {
        background-color: hsla(194, 11%, 39%, 0.8);
      }
    }

    &.loading {
      &::before {
        background-color: hsla(194, 11%, 39%, 0.8);
      }
    }
  }

  .transparent {
    color: hsla(0, 0%, 100%, 1);
    background-color: transparent;

    &:enabled {
      &:hover {
        background-color: hsla(194, 11%, 39%, 0.1);
      }

      &:focus-visible {
        background-color: hsla(0, 0%, 100%, 1);
        color: hsla(0, 0%, 0%, 1);
      }

      &:active {
        background-color: hsla(240, 25%, 95%, 1);
        color: hsla(0, 0%, 0%, 1);
      }
    }

    &.loading {
      &::before {
        background-color: hsla(240, 25%, 95%, 1);
      }

      @extend .loader-dark;
    }
  }

  .light {
    color: hsla(0, 0%, 100%, 1);
    background-color: hsla(0, 0%, 0%, 1);

    &:enabled {
      &:hover {
        background-color: hsla(0, 0%, 25%, 1);
      }

      &:focus-visible {
        background-color: hsla(0, 0%, 15%, 1);
      }

      &:active {
        background-color: hsla(0, 0%, 9%, 1);
      }
    }

    &.loading {
      &::before {
        background-color: hsla(0, 0%, 9%, 1);
      }
    }
  }

  .dark {
    color: hsla(0, 0%, 0%, 1);
    background-color: hsla(0, 0%, 100%, 1);

    &:enabled {
      &:hover {
        background-color: hsla(205, 2%, 82%, 1);
      }

      &:focus-visible {
        background-color: hsla(210, 3%, 78%, 1);
      }

      &:active {
        background-color: hsla(200, 3%, 74%, 1);
      }
    }

    &.loading {
      @extend .loader-dark;

      &::before {
        background-color: hsla(200, 3%, 74%, 1);
      }
    }
  }

  .disabled {
    color: hsla(194, 12%, 65%, 0.4);
    background-color: hsla(194, 11%, 39%, 0.1);
  }

  .loading {
    @extend .loader-white;
  }
}

// mixins
.loader-white {
  &::after {
    background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='2' cy='12' r='2' fill='white' fill-opacity='0.24'/%3E%3Ccircle cx='21.999' cy='12' r='2' fill='white' fill-opacity='0.24'/%3E%3Ccircle cx='12.001' cy='2' r='2' fill='white' fill-opacity='0.24'/%3E%3Ccircle cx='12.001' cy='22' r='2' fill='white'/%3E%3Ccircle cx='19.0713' cy='4.92889' r='2' transform='rotate(45 19.0713 4.92889)' fill='white' fill-opacity='0.24'/%3E%3Ccircle cx='4.92871' cy='19.0711' r='2' transform='rotate(45 4.92871 19.0711)' fill='white' fill-opacity='0.24'/%3E%3Ccircle cx='19.072' cy='19.071' r='2' transform='rotate(135 19.072 19.071)' fill='white' fill-opacity='0.24'/%3E%3Ccircle cx='4.92939' cy='4.92896' r='2' transform='rotate(135 4.92939 4.92896)' fill='white' fill-opacity='0.24'/%3E%3C/svg%3E%0A");
  }
}

.loader-dark {
  &::after {
    background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='2' cy='12' r='2' fill='%2358696E' fill-opacity='0.5'/%3E%3Ccircle cx='21.999' cy='12' r='2' fill='%2358696E' fill-opacity='0.5'/%3E%3Ccircle cx='12.001' cy='2' r='2' fill='%2358696E' fill-opacity='0.5'/%3E%3Ccircle cx='12.001' cy='22' r='2' fill='black'/%3E%3Ccircle cx='19.0713' cy='4.92889' r='2' transform='rotate(45 19.0713 4.92889)' fill='%2358696E' fill-opacity='0.5'/%3E%3Ccircle cx='4.92871' cy='19.0711' r='2' transform='rotate(45 4.92871 19.0711)' fill='%2358696E' fill-opacity='0.5'/%3E%3Ccircle cx='19.072' cy='19.071' r='2' transform='rotate(135 19.072 19.071)' fill='%2358696E' fill-opacity='0.5'/%3E%3Ccircle cx='4.92939' cy='4.92896' r='2' transform='rotate(135 4.92939 4.92896)' fill='%2358696E' fill-opacity='0.5'/%3E%3C/svg%3E%0A");
  }
}
