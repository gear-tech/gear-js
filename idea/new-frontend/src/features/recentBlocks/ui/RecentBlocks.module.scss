@use '@gear-js/ui/mixins' as *;
@use '@gear-js/ui/variables' as ui;
@use 'shared/assets/styles/shared' as *;
@use 'shared/assets/styles/mixins' as *;
@use 'shared/assets/styles/variables' as shared;
@use 'shared/assets/styles/animations' as *;

%enterStyles {
  position: absolute;
  align-items: center;
  top: toRem(-32);
  left: toRem(-99);
  width: toRem(432);
  padding: toRem(14) toRem(12) toRem(24) toRem(24);
  z-index: 10;
  background: linear-gradient(180deg, #29292b 65.67%, shared.$bgColorSecondary 100%);
  border-radius: 24px;
}

%contentTransition {
  .time,
  .title,
  .value,
  .point,
  .graph > hr,
  .blocksBtn svg path {
    @include transition();
  }
}

%enterDoneStyles {
  .graph > hr {
    background-color: ui.$successColor;
  }

  .blockInfo {
    .time,
    .title,
    .value {
      color: ui.$successColor;
    }

    .point {
      background-color: ui.$successColor;
    }
  }

  .blocksBtn svg path {
    fill: ui.$successColor;
  }
}

%exitDoneStyles {
  .graph > hr {
    background-color: shared.$indigo;
  }

  .blockInfo {
    .title {
      color: shared.$indigo800;
    }

    .time,
    .value {
      color: shared.$indigo;
    }

    .point {
      background-color: shared.$indigo700;
    }
  }

  .blocksBtn svg path {
    fill: shared.$indigo;
  }
}

.recentBlocksWrapper {
  position: relative;
}

.recentBlocks {
  @include expand(toRem(36), 522px);

  display: flex;
  height: toRem(36);
  flex-direction: column;

  &.open {
    border: ui.$borderModal;
  }

  &:global(.enter) {
    @extend %enterStyles;
  }

  &:global(.enter-active) {
    @extend %enterDoneStyles;
    @extend %contentTransition;
  }

  &:global(.enter-done) {
    @extend %enterStyles;
    @extend %enterDoneStyles;
  }

  &:global(.exit) {
    @extend %enterStyles;
    @extend %enterDoneStyles;
  }

  &:global(.exit-active) {
    @extend %exitDoneStyles;
    @extend %contentTransition;

    height: toRem(55);
  }
}

.indicators {
  @include childrenMargin(shared.$marginTiny, right);

  display: flex;
  color: shared.$indigo700;
  font-size: shared.$fontSizeBig;
  font-weight: 300;
  line-height: 1.3;
  align-items: center;

  .value {
    color: shared.$indigo;
    font-weight: 600;
    font-family: 'Kanit';
  }
}

.content {
  display: flex;

  .title {
    color: shared.$indigo800;
    line-height: 1.3;
    font-size: shared.$fontSizeTiny;
  }

  .blockInfo {
    position: relative;
    margin-left: 12px;

    .time {
      min-width: toRem(50);
    }

    .point {
      display: inline-block;
      width: toRem(4);
      height: toRem(4);
      border-radius: 50%;
      background-color: shared.$indigo;
    }
  }
}

.blocksBtn {
  align-self: center;
  margin-left: shared.$marginTiny;

  svg {
    transform: rotate(90deg);

    path {
      fill: shared.$indigo;
    }
  }

  &.rotated {
    svg {
      transform: rotate(-90deg);
    }
  }
}

.recentBlocksList {
  @include fade();

  &:global(.enter),
  &:global(.exit) {
    overflow: hidden;
  }
}
