@use '@gear-js/ui/mixins' as *;
@use 'shared/assets/styles/_shared.scss' as *;
@use 'shared/assets/styles/_mixins.scss' as *;
@use 'shared/assets/styles/_variables.scss' as *;
@use 'shared/assets/styles/_animations.scss' as *;

%enterStyles {
  position: absolute;
  align-items: center;
  top: toRem(-32);
  left: toRem(-99);
  width: toRem(432);
  padding: toRem(14) toRem(12) toRem(24) toRem(24);
  z-index: 10;
  background: linear-gradient(180deg, #29292B 65.67%, $bgColorSecondary 100%);
  border-radius: 24px; 
}

%contentTransition {
  .time,
  .title,
  .value,
  .point,
  .graph > hr,
  .blocksBtn svg path {
    @include transition();
  }
}

%enterDoneStyles {
  .graph > hr { 
    background-color: $successColor;
  }

  .blockInfo {
    .time,
    .title,
    .value {
      color: $successColor;
    }
    
    .point {
      background-color: $successColor;
    }  
  }

  .blocksBtn svg path {
    fill: $successColor;
  } 
}

%exitDoneStyles {  
  .graph > hr { 
    background-color: $indigo;
  }

  .blockInfo {
    .title {
      color: $indigo800;
    }

    .time,
    .value {
      color: $indigo;
    }
    
    .point {
      background-color: $indigo700;
    }  
  }

  .blocksBtn svg path {
    fill: $indigo;
  } 
}

.recentBlocksWrapper {
  position: relative;
}

.recentBlocks {
  @include expand(toRem(36), 522px);

  display: flex;
  flex-direction: column;

  &:global(.enter) {
    @extend %enterStyles;
  }

  &:global(.enter-active) {
    @extend %enterDoneStyles;
    @extend %contentTransition;
  }

  &:global(.enter-done) {
    @extend %enterStyles;
    @extend %enterDoneStyles;
  }

  &:global(.exit) {
    @extend %enterStyles;
    @extend %enterDoneStyles;
  }

  &:global(.exit-active) {
    @extend %exitDoneStyles;
    @extend %contentTransition;

    height: toRem(55);
  }
}

.indicators {
  @include childrenMargin($marginTiny, right);

  display: flex;
  color: $indigo700;
  font-size: $fontSizeBig;
  font-weight: 300;
  line-height: 1.3;
  align-items: center;

  .value {
    color: $indigo;
    font-weight: 600;
    font-family: 'Kanit';
  }
}

.content {
  display: flex;

  .title {
    color: $indigo800;
    line-height: 1.3;
    font-size: $fontSizeTiny;
  }

  .blockInfo {
    position: relative;
    margin-left: 12px;

    .time {
      min-width: toRem(50);
    }

    .point {
      display: inline-block;
      width: toRem(4);
      height: toRem(4);
      border-radius: 50%;
      background-color: $indigo;
    }  
  }
}

.blocksBtn {
  align-self: center;
  margin-left: $marginTiny;

  svg {
    transform: rotate(90deg);

    path {
      fill: $indigo;
    }
  }

  &.rotated {
    svg {
      transform: rotate(-90deg);
    }
  }
}

.recentBlocksList { 
  @include fade();

  &:global(.enter),
  &:global(.exit) {
    overflow: hidden;
  }
}